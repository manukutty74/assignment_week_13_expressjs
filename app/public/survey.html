<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder Survey</title>

    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


</head>

<body>

    <div class="container">


        <!-- Quiz Page Title -->
        <div class="page-header">
            <h2 style="font-size: 30px;">
                <span class="glyphicon glyphicon-link" style="color: #d9534f;"></span> Friend Finder Quiz</h2>
        </div>

        <!-- User Name and Photo Panel -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <strong>About You</strong>
                </h3>
            </div>
            <div class="panel-body">
                    <h4>Your Full Name</h4>
                    <div class="input-group">
                      <input id = "formName" class="form-control" type="text" name="name" placeholder="John Smith">
                      <span class="input-group-addon">(Required)</span>
                    </div>  
                    <br>
                    <h4>Link to a Photo Image</h4>
                    <div class="input-group">
                      <input id = "formImage" class="form-control" type="text" name="name" placeholder="http://yourphotolink.com.jpg/">
                      <span class="input-group-addon">(Required)</span>
                    </div>
             </div>
          </div>
        

        <!-- Progress Bar -->
        <div class="progress">
            <div class="progress-bar progress-bar-danger progress-bar-striped  active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
            </div>
        </div>


        <!-- Quiz Page Questions Panel -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <strong>Questionnaire</strong>
                </h3>
            </div>
            <div class="panel-body">
                <div class="container">
                
                        <div class="row">
                                <div class="col-sm-6 col-md-6 col-lg-3">
                                    <!-- Q1 -->
                                    <h4>
                                        <strong>Question 1</strong>
                                    </h4>
                                    <h5>Fine dinning ? </h5>
                                    <select data-placeholder="" class="chosen-select" id="Q1">
                                        <option value=""></option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-3">
        
                                    <!-- Q2 -->
                                    <h4>
                                        <strong>Question 2</strong>
                                    </h4>
                                    <h5>Love Sports?</h5>
                                    <select data-placeholder="" class="chosen-select" id="Q2">
                                        <option value=""></option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-3">
        
                                    <!-- Q3 -->
                                    <h4>
                                        <strong>Question 3</strong>
                                    </h4>
                                    <h5> Drink like Irish or Scotish ? & then dance like you were Bollywood star?</h5>
                                    <select data-placeholder="" class="chosen-select" id="Q3">
                                        <option value=""></option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                              </div>
                              <div class = row>
                                    <div class="col-sm-6 col-md-6 col-lg-3">
                                     <!-- Q4 -->
                                     <h4>
                                         <strong>Question 4</strong>
                                     </h4>
                                     <h5>Travel during vacations ?</h5>
                                     <select data-placeholder="" class="chosen-select" id="Q4">
                                         <option value=""></option>
                                         <option value="1">1 (Strongly Disagree)</option>
                                         <option value="2">2</option>
                                         <option value="3">3</option>
                                         <option value="4">4</option>
                                         <option value="5">5 (Strongly Agree)</option>
                                     </select>
                                 </div>
             
                                 <div class="col-sm-6 col-md-6 col-lg-3">
                                     <!-- Q5 -->
                                     <h4>
                                         <strong>Question 5</strong>
                                     </h4>
                                     <h5>Workout...Keep Fit ?</h5>
                                     <select data-placeholder="" class="chosen-select" id="Q5">
                                         <option value=""></option>
                                         <option value="1">1 (Strongly Disagree)</option>
                                         <option value="2">2</option>
                                         <option value="3">3</option>
                                         <option value="4">4</option>
                                         <option value="5">5 (Strongly Agree)</option>
                                     </select>
                                 </div>
                                 <div class="col-sm-6 col-md-6 col-lg-3">
                                     <!-- Q6 -->
                                     <h4>
                                         <strong>Question 6</strong>
                                     </h4>
                                     <h5>Like to entertain friends ?</h5>
                                     <select data-placeholder="" class="chosen-select" id="Q6">
                                         <option value=""></option>
                                         <option value="1">1 (Strongly Disagree)</option>
                                         <option value="2">2</option>
                                         <option value="3">3</option>
                                         <option value="4">4</option>
                                         <option value="5">5 (Strongly Agree)</option>
                                     </select>
                                 </div>
                             </div>
                             <div class="row">
                                    <div class="col-sm-6 col-md-6 col-lg-3">
                                       <!-- Q7 -->
                                       <h4>
                                           <strong>Question 7</strong>
                                       </h4>
                                       <h5>Hate smoking ?</h5>
                                       <select data-placeholder="" class="chosen-select" id="Q7">
                                           <option value=""></option>
                                           <option value="1">1 (Strongly Disagree)</option>
                                           <option value="2">2</option>
                                           <option value="3">3</option>
                                           <option value="4">4</option>
                                           <option value="5">5 (Strongly Agree)</option>
                                       </select>
                                   </div>
                                   <div class="col-sm-6 col-md-6 col-lg-3">
                                       <!-- Q8 -->
                                       <h4>
                                           <strong>Question 8</strong>
                                       </h4>
                                       <h5>Don't want to have a pet , but love animals ?</h5>
                                       <select data-placeholder="" class="chosen-select" id="Q8">
                                           <option value=""></option>
                                           <option value="1">1 (Strongly Disagree)</option>
                                           <option value="2">2</option>
                                           <option value="3">3</option>
                                           <option value="4">4</option>
                                           <option value="5">5 (Strongly Agree)</option>
                                       </select>
                                   </div>
                                   <div class="col-sm-6 col-md-6 col-lg-3">
                                       <!-- Q9 -->
                                       <h4>
                                           <strong>Question 9</strong>
                                       </h4>
                                       <h5>Live & Let Live ? </h5>
                                       <select data-placeholder="" class="chosen-select" id="Q9">
                                           <option value=""></option>
                                           <option value="1">1 (Strongly Disagree)</option>
                                           <option value="2">2</option>
                                           <option value="3">3</option>
                                           <option value="4">4</option>
                                           <option value="5">5 (Strongly Agree)</option>
                                       </select>
                                   </div>
                               </div>

                                <div class=row>
                                    <div class="col-sm-6 col-md-6 col-lg-3">
                                    <!-- Q10 -->
                                    <h4>
                                        <strong>Question 10</strong>
                                    </h4>
                                    <h5>Cant help , then atleast don't hurt other ... </h5>
                                    <select data-placeholder="" class="chosen-select" id="Q10">
                                        <option value=""></option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </div>
                </div>
           </div>

     </div>
  

    <!-- Quiz Submit Button -->
    <button id="submitButton" type="submit" class="btn btn-md btn-danger btn-block">
        <h4>
            <span class="glyphicon glyphicon-send"></span> Submit</h4>
    </button>


    <br>

    <!-- Webpage Footer -->
    <footer class="footer">
          <p><a href="/api/friends">API Friends List</a> | <a href="copyright" target="_blank">@copyright</a> | <a href="/">Home</a></p> 
     </footer>




   <!-- Modal -->

   <div id="myModal1" class="modal fade" role="dialog">
        <div class="modal-dialog">
        
            <!-- Modal Content-->
            <div class="modal-content">
        
                <!-- "X" Button to close the modal -->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><strong>Validation Errors</strong></h2>
                </div>
        
               <!-- Modal Body (For Match Info) -->
                <div class="modal-body">
                    <h2 id="etext1">Please Answer All The 10 Questions !</h2>
                    <h2 id="etext2">Please Make Sure Name and the Photo Link are provided! </h2>
                </div>
        
                <!-- Modal Footer (Close Button) -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
        
            </div>
        </div>
    </div>


    <div id="myModal2" class="modal fade" role="dialog">
        <div class="modal-dialog">
        
            <!-- Modal Content-->
            <div class="modal-content">
        
                <!-- "X" Button to close the modal -->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><strong>Meet Your New Friend!</strong></h2>
                </div>
        
               <!-- Modal Body (For Match Info) -->
                <div class="modal-body">
                    <h2 id="matchName"></h2>
                    <img id="matchImg" src="" alt="Image Not Found" style="max-width: 350px;">
                </div>
        
                <!-- Modal Footer (Close Button) -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
        
            </div>
        </div>
    </div>

<!--=======================================================================================================================-->

    <script type="text/javascript">
        $(document).ready(function () {

            
            // every time question is completed, update the progress bar accordingly.
            $(".chosen-select").on('mouseup', function () {
                var ProgressBarValue = 0;            
                $.each(["Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10"], function (i, val) {
                  
                    var qAns = ''
                    qAns = $("#" + val).val();
                    if (qAns != '') {
                        ProgressBarValue += 10; 
                     }
                });
                ProgressBarValue += '%';
              
                $(".progress-bar").css('width', ProgressBarValue);

            }); //end of fx 

            var questionsCompleted = "true";

            // on the submit button click , check if all the questions have been answered. 
            $("#submitButton").on("click", function () {
                var qAns = 0;
                $(".chosen-select").each(function () {
                    if ($(this).val() !== "") {
                        qAns +=1; 
                       
                       }               
                });

                             
                if ($("#formName").val() !== '')
                { qAns+=1;} 
                if ($("#formImage").val() !== '')
                { qAns+=1;} 

                if (qAns === 12)
                 {  
                
                // All the validation is over before this step. 
                // Now that we have the fields filled properly , we need to create a new friend object.
                
                var newFriend = {
                name: $('#formName').val().trim(),
                photo: $('#formImage').val().trim(),
                scores: [
                    $('#Q1').val(),
                    $('#Q2').val(),
                    $('#Q3').val(),
                    $('#Q4').val(),
                    $('#Q5').val(),
                    $('#Q6').val(),
                    $('#Q7').val(),
                    $('#Q8').val(),
                    $('#Q9').val(),
                    $('#Q10').val(),
                ]};
                
            //console.log(newFriend);
            // Now use the AJAX method to post the new Friend details to the server.
            // The server will perform the code for the POST method and get the results back. 

            //Grabs current URL of website

            var currentURL = window.location.origin + "/api/friends";
            
               //AJAX posts the data to friends API.
               // $.post(currentURL + "/api/friends", newFriend, function(data) {
              //Grab the result from the AJAX post so that the best match's name and photo are displayed.
           //    $.ajax({
           //             url: currentURL,
           //             method: "POST",
           //             data: newFriend,
            //            url: currentURL
             //           })
              //  .then(function(data) { 

             $.post(currentURL , newFriend, function(data) {

                   $("#matchName").text(data.name);
                   $("#match").attr("src",data.photo);
                
                // Show the modal with the best match
                   $('#myModal2').modal();

                //clear form after submission
                $('#name').val("");
                $('#photo').val("");
                $('#Q1').val("");
                $('#Q2').val("");
                $('#Q3').val("");
                $('#Q4').val("");
                $('#Q5').val("");
                $('#Q6').val("");
                $('#Q7').val("");
                $('#Q8').val("");
                $('#Q9').val("");
                $('#Q10').val("");
            
               }); // end of .then block

          }  // end if - error checking
          else 
            {
                $('#myModal1').modal(); 
            }

         });
  
     }); // end of document ready fx
    </script>


</body>
</htm>